# 筛选购买所有产品的客户ID
## 需求
找出购买了Product表中**所有产品**的客户ID。


## 核心解法
```sql
SELECT customer_id 
FROM Customer
GROUP BY customer_id
HAVING COUNT(DISTINCT product_key) = (
  SELECT COUNT(*) FROM Product  -- 总产品数
);
```


## 逻辑拆解
1. **分组**：按 `customer_id` 分组，统计每个客户的购买记录
2. **去重计数**：`COUNT(DISTINCT product_key)` → 每个客户购买的**不同产品数量**
3. **匹配总产品数**：子查询获取Product表总产品数，筛选数量相等的客户


## 示例验证
- Product有2个产品（5、6）
- 客户1：买了5、6 → 计数2 → 符合
- 客户2：只买了6 → 计数1 → 排除
- 客户3：买了5、6 → 计数2 → 符合
- 结果：1、3
