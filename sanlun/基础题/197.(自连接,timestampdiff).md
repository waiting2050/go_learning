# 【SQL实战】找出温度高于前一天的日期ID
## 一、需求说明
给定 `Weather` 表（含日期与温度），筛选出“当日温度高于前一天（昨天）”的日期对应的 `id`。

## 二、表结构
| 字段名 | 类型 | 说明 |
|--------|------|------|
| `id` | int | 唯一标识（主键） |
| `recordDate` | date | 记录日期（无重复） |
| `temperature` | int | 当日温度 |

## 三、示例数据
### 输入：Weather 表
| id  | recordDate | temperature |
|-----|------------|-------------|
| 1   | 2015-01-01 | 10          |
| 2   | 2015-01-02 | 25          |
| 3   | 2015-01-03 | 20          |
| 4   | 2015-01-04 | 30          |

### 输出
| id  |
|-----|
| 2   |
| 4   |

## 四、SQL代码
```sql
# Write your MySQL query statement below
select a.id
from Weather a
join Weather b
on timestampdiff(day, a.recordDate, b.recordDate) = -1  -- 关联a的前一天记录（b）
where a.temperature > b.temperature;  -- 筛选a温度高于b的记录
```

## 五、关键说明
### 1. `timestampdiff` 函数
- 作用：计算两个日期/时间的差值，返回整数。
- 语法：`timestampdiff(单位, 开始时间, 结束时间)`
- 此处用法：`timestampdiff(day, a.recordDate, b.recordDate) = -1`  // 注意与datediff函数是反过来的，这里是-1
  表示“`b.recordDate` 比 `a.recordDate` 早1天”（即 `b` 是 `a` 的前一天），单位 `day` 代表按“天”计算差值。

### 2. 表自连接逻辑
- 用 `Weather a` 表示“当日”，`Weather b` 表示“前一天”，通过 `timestampdiff` 关联两表，确保 `b` 是 `a` 的前一天数据。
- `where a.temperature > b.temperature` 筛选出“当日温度高于前一天”的记录，最终返回对应的 `a.id`。