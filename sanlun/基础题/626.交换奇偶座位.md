### 交换相邻座位（奇偶互换）

#### 问题
交换连续奇数、偶数id的学生座位；若总人数为奇数，最后1人不变。按id升序返回。


#### 样例数据
| id  | student |
|-----|---------|
| 1   | Abbot   |
| 2   | Doris   |
| 3   | Emerson |
| 4   | Green   |
| 5   | Jeames  |

**输出**：
| id  | student |
|-----|---------|
| 1   | Doris   |
| 2   | Abbot   |
| 3   | Green   |
| 4   | Emerson |
| 5   | Jeames  |


#### 方法1：窗口函数（`RANK()`）
```sql
select 
  rank() over (order by if(id%2=0, id-2, id)) id, 
  student 
from Seat;
```
**思路**：  
- 偶数id→`id-2`（如2→0，4→2），奇数id→保持原id（1→1，3→3，5→5）。  
- 按上述计算结果排序，`RANK()`生成新id，实现奇偶互换。


#### 方法2：条件判断（`CASE`）
```sql
select 
  case 
    when id%2=0 then id-1 
    when id%2=1 and id!=(select count(*) from Seat) then id+1 
    else id 
  end id, 
  student 
from Seat 
order by id;
```
**思路**：  
- 偶数id→`id-1`（与前一奇数互换）。  
- 非最后奇数id→`id+1`（与后一偶数互换）。  
- 最后奇数id→不变。  
- 按新id排序。


#### 关键函数
- `RANK() over (order by ...)`：按自定义规则生成新序号。  
- `CASE`：根据id奇偶性和位置动态计算目标id。  
- `if(条件, 结果1, 结果2)`：简化奇偶判断（方法1）。