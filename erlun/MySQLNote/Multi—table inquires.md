## 多表关系
### 概述
项目开发中，在进行数据库表结构设计时，会根据业务需求及业务模块之间的关系，分析并设计表结构，由于业务之间相互关联，所以各个表结构之间也存在着各种联系，基本上分为三种：
- 一对多(多对一)
- 多对多
- 一对一
- 
***

#### 一对多(多对一)
- **案例**：部门与员工的关系
- **关系**：一个部门对应多个员工，一个员工对应一个部门
- **实现**：==在多的一方建立外键，指向一的一方的主键==

| 员工表(emp) |        |        |            | 部门表(dept) |        |
| ----------- | ------ | ------ | ---------- | ------------ | ------ |
| id          | name   | age    | dept_id    | id           | name   |
| 1           | 张无忌 | 20     | 1          | 1            | 研发部 |
| 2           | 杨逍   | 33     | 1          | 2            | 市场部 |
| 3           | 赵敏   | 18     | 2          | 3            | 财务部 |
| 4           | 常遇春 | 43     | 2          | 4            | 销售部 |

***

#### 多对多
- **案例**：学生与课程的关系
- **关系**：一个学生可以选修多门课程，一门课程也可以供多个学生选择
- **实现**：==建立第三张中间表，中间表至少包含两个外键，分别关联两方主键==

| 学生表(student) |        |          |
| --------------- | ------ | -------- |
| id              | name   | no       |
| 1               | 黛绮丝 | 2000100101 |
| 2               | 谢逊   | 2000100102 |
| 3               | 殷天正 | 2000100103 |
| 4               | 韦一笑 | 2000100104 |

| 学生课程关系表(student_course) |            |            |
| ------------------------------ | ---------- | ---------- |
| id                             | studentid  | courseid   |
| 1                              | 1          | 1          |
| 2                              | 1          | 2          |
| 3                              | 1          | 3          |
| 4                              | 2          | 1          |
| 5                              | 2          | 4          |

| 课程表(course) |        |
| -------------- | ------ |
| id             | name   |
| 1              | Java   |
| 2              | PHP    |
| 3              | MySQL  |
| 4              | Hadoop |

***

#### 一对一
- **案例**：用户与用户详情的关系
- **关系**：一对一关系，多用于单表拆分，将一张表的基础字段放在一张表中，其他详情字段放在另一张表中，以提升操作效率
- **实现**：==在任意一方加入外键，关联另外一方的主键，并且设置外键为唯一的(UNIQUE)==

| 用户基本信息表(tb_user) |        |       |        |          |
| ----------------------- | ------ | ----- | ------ | -------- |
| id                      | name   | age   | gender | phone    |
| 1                       | 黄渤   | 45    | 1      | 18800001111 |
| 2                       | 冰冰   | 35    | 2      | 18800002222 |
| 3                       | 码云   | 55    | 1      | 18800008888 |
| 4                       | 李彦宏 | 50    | 1      | 18800009999 |

| 用户教育信息表(tb_user_edu) |        |        |                  |                  |             |        |
| --------------------------- | ------ | ------ | ---------------- | ---------------- | ----------- | ------ |
| id                          | degree | major  | primaryschool    | middleschool     | university  | userid |
| 1                           | 本科   | 舞蹈   | 静安区第一小学   | 静安区第一中学   | 北京舞蹈学院 | 1      |
| 2                           | 硕士   | 表演   | 朝阳区第一小学   | 朝阳区第一中学   | 北京电影学院 | 2      |
| 3                           | 本科   | 英语   | 杭州市第一小学   | 杭州市第一中学   | 杭州师范大学 | 3      |
| 4                           | 本科   | 应用数学 | 阳泉第一小学     | 阳泉区第一中学   | 清华大学    | 4      |

***

